{
    "name": "Human-in-the-Loop Test Pipeline",
    "description": "Comprehensive test pipeline demonstrating various HITL interaction patterns",
    "version": "1.0.0",
    "steps": [
        {
            "id": "initial_processing",
            "name": "Initial Data Processing",
            "step_class": "InitialProcessingStep",
            "module": "tests.pipelines.hitl_pipeline.steps.initial_processing",
            "config": {
                "processing_type": "automated",
                "quality_threshold": 0.8
            }
        },
        {
            "id": "quality_assessment",
            "name": "Quality Assessment",
            "step_class": "QualityAssessmentStep", 
            "module": "tests.pipelines.hitl_pipeline.steps.quality_assessment",
            "config": {
                "confidence_threshold": 0.85,
                "escalation_enabled": true
            }
        },
        {
            "id": "human_review_pause",
            "name": "Human Review and Approval",
            "step_class": "HumanReviewStep",
            "module": "tests.pipelines.hitl_pipeline.steps.human_review",
            "config": {
                "timeout_seconds": 300,
                "approval_required": true,
                "ui_schema": {
                    "type": "review_approval",
                    "title": "Content Review Required",
                    "description": "Please review the processed content and provide your decision."
                }
            }
        },
        {
            "id": "manual_enhancement",
            "name": "Manual Content Enhancement",
            "step_class": "ManualEnhancementStep",
            "module": "tests.pipelines.hitl_pipeline.steps.manual_enhancement", 
            "config": {
                "enhancement_type": "iterative",
                "max_iterations": 3,
                "timeout_seconds": 600
            }
        },
        {
            "id": "collaborative_decision",
            "name": "Multi-Stakeholder Decision",
            "step_class": "CollaborativeDecisionStep",
            "module": "tests.pipelines.hitl_pipeline.steps.collaborative_decision",
            "config": {
                "stakeholders": ["reviewer1", "reviewer2", "manager"],
                "decision_type": "majority",
                "timeout_hours": 24,
                "voting_options": ["approve", "reject", "request_changes"]
            }
        },
        {
            "id": "final_processing",
            "name": "Final Processing",
            "step_class": "FinalProcessingStep",
            "module": "tests.pipelines.hitl_pipeline.steps.final_processing",
            "config": {
                "output_format": "json",
                "include_audit_trail": true
            }
        }
    ],
    "flow": {
        "start_at": "initial_processing",
        "paths": [
            {
                "from_step": "initial_processing",
                "to_step": "quality_assessment",
                "condition": {
                    "type": "always"
                }
            },
            {
                "from_step": "quality_assessment", 
                "to_step": "human_review_pause",
                "condition": {
                    "type": "expression",
                    "config": {
                        "source": "result.requires_human_review",
                        "operator": "equals",
                        "value": true
                    }
                }
            },
            {
                "from_step": "quality_assessment",
                "to_step": "final_processing",
                "condition": {
                    "type": "expression",
                    "config": {
                        "source": "result.requires_human_review", 
                        "operator": "equals",
                        "value": false
                    }
                }
            },
            {
                "from_step": "human_review_pause",
                "to_step": "manual_enhancement",
                "condition": {
                    "type": "expression",
                    "config": {
                        "source": "result.decision",
                        "operator": "equals", 
                        "value": "request_enhancement"
                    }
                }
            },
            {
                "from_step": "human_review_pause",
                "to_step": "collaborative_decision",
                "condition": {
                    "type": "expression",
                    "config": {
                        "source": "result.decision",
                        "operator": "equals",
                        "value": "escalate"
                    }
                }
            },
            {
                "from_step": "human_review_pause",
                "to_step": "final_processing", 
                "condition": {
                    "type": "expression",
                    "config": {
                        "source": "result.decision",
                        "operator": "equals",
                        "value": "approve"
                    }
                }
            },
            {
                "from_step": "manual_enhancement",
                "to_step": "final_processing",
                "condition": {
                    "type": "always"
                }
            },
            {
                "from_step": "collaborative_decision",
                "to_step": "final_processing",
                "condition": {
                    "type": "always"
                }
            }
        ]
    }
}
{
  "name": "Iterative Refinement Demo",
  "description": "Demonstrates progressive enhancement pattern where humans iteratively improve results",
  "version": "1.0.0",
  "steps": [
    {
      "id": "generate_draft",
      "name": "Generate Initial Draft",
      "type": "task",
      "class": "GenerateInitialDraftStep",
      "module": "steps.refinement_steps",
      "config": {
        "description": "Generate an initial draft document"
      }
    },
    {
      "id": "refine_content",
      "name": "Refine Content",
      "type": "task",
      "class": "RefineContentStep",
      "module": "steps.refinement_steps",
      "config": {
        "max_iterations": 3,
        "prompt": "Please review and refine the content. You can make multiple rounds of improvements."
      }
    },
    {
      "id": "process_refinement",
      "name": "Process Refinement Response",
      "type": "task",
      "class": "ProcessRefinementStep",
      "module": "steps.refinement_steps",
      "config": {
        "description": "Process the human refinement and decide if more iterations needed"
      }
    },
    {
      "id": "check_continue",
      "name": "Check If Continue Refining",
      "type": "condition",
      "conditions": [
        {
          "field": "status",
          "operator": "equals",
          "value": "continue_refinement",
          "type": "value"
        }
      ]
    },
    {
      "id": "finalize_document",
      "name": "Finalize Document",
      "type": "task",
      "class": "FinalizeDocumentStep",
      "module": "steps.refinement_steps",
      "config": {
        "description": "Finalize the refined document with metadata"
      }
    }
  ],
  "flow": {
    "start_at": "generate_draft",
    "paths": [
      {
        "from": "generate_draft",
        "to": "refine_content",
        "condition": {
          "type": "always"
        }
      },
      {
        "from": "refine_content",
        "to": "process_refinement",
        "condition": {
          "type": "always"
        }
      },
      {
        "from": "process_refinement",
        "to": "check_continue",
        "condition": {
          "type": "always"
        }
      },
      {
        "from": "check_continue",
        "to": "refine_content",
        "condition": {
          "type": "condition",
          "description": "Continue refining"
        }
      },
      {
        "from": "check_continue",
        "to": "finalize_document",
        "condition": {
          "type": "else",
          "description": "Refinement complete"
        }
      }
    ]
  },
  "metadata": {
    "category": "examples",
    "tags": ["hitl", "iterative", "progressive-enhancement"],
    "author": "IA Modules",
    "use_case": "Document refinement with human in the loop"
  }
}
